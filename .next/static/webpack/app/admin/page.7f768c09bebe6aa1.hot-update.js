"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/page",{

/***/ "(app-pages-browser)/./src/app/admin/actions.ts":
/*!**********************************!*\
  !*** ./src/app/admin/actions.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBook: function() { return /* binding */ createBook; },\n/* harmony export */   deleteBook: function() { return /* binding */ deleteBook; },\n/* harmony export */   updateBook: function() { return /* binding */ updateBook; }\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(app-pages-browser)/../../../node_modules/.pnpm/zod@3.23.8/node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabase */ \"(app-pages-browser)/./src/lib/supabase.ts\");\n\n\n// ============================================================================\n// ВАЛІДАЦІЙНІ СХЕМИ\n// ============================================================================\nconst BookInsertSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    code: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, \"Код книги обов'язковий\"),\n    title: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, \"Назва книги обов'язкова\"),\n    author: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, \"Автор обов'язковий\"),\n    category: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, \"Категорія обов'язкова\"),\n    subcategory: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    short_description: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    isbn: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    pages: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().int().min(1).optional(),\n    age_range: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    language: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    publisher: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    publication_year: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().int().min(1000).max(new Date().getFullYear()).optional(),\n    cover_url: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().url().optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_1__.z.enum([\n        \"available\",\n        \"issued\",\n        \"reserved\",\n        \"lost\"\n    ]),\n    qty_total: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().int().min(1),\n    price_uah: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().min(0).optional(),\n    location: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().optional(),\n    rating: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().min(0).max(5).optional(),\n    rating_count: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().int().min(0).optional(),\n    badges: zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.string()).optional(),\n    tags: zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.string()).optional()\n});\n// ============================================================================\n// SERVER ACTIONS\n// ============================================================================\nasync function createBook(form) {\n    try {\n        // Валідуємо дані\n        const input = BookInsertSchema.parse(form);\n        console.log(\"Creating book:\", input);\n        // Создаем книгу в Supabase\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"books\").insert({\n            ...input,\n            qty_available: input.qty_total,\n            available: input.status === \"available\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        }).select();\n        if (error) {\n            console.error(\"Supabase error:\", error);\n            throw new Error(error.message);\n        }\n        if (!data || data.length === 0) {\n            throw new Error(\"Не вдалося створити книгу - дані не повернулися з бази\");\n        }\n        const createdBook = data[0];\n        console.log(\"Book created successfully:\", data);\n        return {\n            success: true,\n            data\n        };\n    } catch (error) {\n        console.error(\"Create book error:\", error);\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.z.ZodError) {\n            return {\n                success: false,\n                error: error.errors.map((e)=>e.message).join(\", \")\n            };\n        }\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Невідома помилка\"\n        };\n    }\n}\nasync function updateBook(id, form) {\n    try {\n        var _form_subcategory, _form_description, _form_short_description, _form_location;\n        console.log(\"\\uD83D\\uDCDD Starting book update:\", id, form);\n        // Проверяем что ID действительно передан\n        if (!id || !id.trim()) {\n            return {\n                success: false,\n                error: \"ID книги не передан або пустий\"\n            };\n        }\n        // Валідуємо обов'язкові поля якщо вони присутні\n        if (form.code && !form.code.trim()) {\n            return {\n                success: false,\n                error: \"Код книги не може бути пустим\"\n            };\n        }\n        if (form.title && !form.title.trim()) {\n            return {\n                success: false,\n                error: \"Назва книги не може бути пустою\"\n            };\n        }\n        // Підготовлюємо дані для оновлення\n        const updateData = {};\n        if (form.code) updateData.code = form.code.trim();\n        if (form.title) updateData.title = form.title.trim();\n        if (form.author) updateData.author = form.author.trim();\n        if (form.category) updateData.category = form.category.trim();\n        if (form.subcategory !== undefined) updateData.subcategory = ((_form_subcategory = form.subcategory) === null || _form_subcategory === void 0 ? void 0 : _form_subcategory.trim()) || null;\n        if (form.description !== undefined) updateData.description = ((_form_description = form.description) === null || _form_description === void 0 ? void 0 : _form_description.trim()) || null;\n        if (form.short_description !== undefined) updateData.short_description = ((_form_short_description = form.short_description) === null || _form_short_description === void 0 ? void 0 : _form_short_description.trim()) || null;\n        if (form.location !== undefined) updateData.location = ((_form_location = form.location) === null || _form_location === void 0 ? void 0 : _form_location.trim()) || null;\n        if (form.cover_url !== undefined) updateData.cover_url = form.cover_url || null;\n        if (form.status) updateData.status = form.status;\n        if (form.qty_total !== undefined) updateData.qty_total = Math.max(1, form.qty_total);\n        if (form.price_uah !== undefined) updateData.price_uah = form.price_uah || null;\n        // Якщо змінюється кількість, оновлюємо доступність\n        if (form.qty_total !== undefined) {\n            // Підраховуємо активні аренди\n            const { data: rentals, error: rentalsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"rentals\").select(\"id\").eq(\"book_id\", id).in(\"status\", [\n                \"active\",\n                \"overdue\"\n            ]);\n            if (rentalsError) {\n                console.warn(\"Could not count active rentals:\", rentalsError);\n            } else {\n                const activeRentals = (rentals === null || rentals === void 0 ? void 0 : rentals.length) || 0;\n                updateData.qty_available = Math.max(0, updateData.qty_total - activeRentals);\n                updateData.available = updateData.qty_available > 0;\n            }\n        }\n        // Оновлюємо дату зміни\n        updateData.updated_at = new Date().toISOString();\n        console.log(\"\\uD83D\\uDCBE Attempting to update book with ID:\", id);\n        console.log(\"\\uD83D\\uDCE6 Update data:\", JSON.stringify(updateData, null, 2));\n        // Спочатку перевіримо, чи існує книга з таким ID\n        const { data: existingBook, error: checkError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"books\").select(\"id\").eq(\"id\", id).single();\n        if (checkError || !existingBook) {\n            const errorMessage = \"Книгу з ID \".concat(id, \" не знайдено в базі даних\");\n            console.error(errorMessage, checkError);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n        console.log(\"✅ Book exists, proceeding with update\");\n        // Оновлюємо книгу в Supabase\n        const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"books\").update(updateData).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Supabase error:\", error);\n            throw new Error(error.message);\n        }\n        console.log(\"✅ Book updated successfully:\", data);\n        console.log(\"\\uD83D\\uDD0D Updated book data:\", JSON.stringify(data, null, 2));\n        return {\n            success: true,\n            data\n        };\n    } catch (error) {\n        console.error(\"Update book error:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Невідома помилка\"\n        };\n    }\n}\nasync function deleteBook(id) {\n    try {\n        console.log(\"Deleting book:\", id);\n        // Проверяем есть ли активные аренды для этой книги\n        const { data: rentals, error: rentalsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"rentals\").select(\"id\").eq(\"book_id\", id).in(\"status\", [\n            \"active\",\n            \"overdue\"\n        ]);\n        if (rentalsError) {\n            throw new Error(\"Помилка перевірки орендувань: \".concat(rentalsError.message));\n        }\n        if (rentals && rentals.length > 0) {\n            return {\n                success: false,\n                error: \"Неможливо видалити книгу, яка має активні орендування. Спочатку поверніть всі примірники.\"\n            };\n        }\n        // Удаляем книгу\n        const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"books\").delete().eq(\"id\", id);\n        if (error) {\n            throw new Error(error.message);\n        }\n        console.log(\"Book deleted successfully:\", id);\n        return {\n            success: true\n        };\n    } catch (error) {\n        console.error(\"Delete book error:\", error);\n        return {\n            success: false,\n            error: error instanceof Error ? error.message : \"Невідома помилка\"\n        };\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYWRtaW4vYWN0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1QjtBQUNrQjtBQUd6QywrRUFBK0U7QUFDL0Usb0JBQW9CO0FBQ3BCLCtFQUErRTtBQUUvRSxNQUFNRSxtQkFBbUJGLGtDQUFDQSxDQUFDRyxNQUFNLENBQUM7SUFDaENDLE1BQU1KLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQ3hCQyxPQUFPUCxrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHQyxHQUFHLENBQUMsR0FBRztJQUN6QkUsUUFBUVIsa0NBQUNBLENBQUNLLE1BQU0sR0FBR0MsR0FBRyxDQUFDLEdBQUc7SUFDMUJHLFVBQVVULGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdDLEdBQUcsQ0FBQyxHQUFHO0lBQzVCSSxhQUFhVixrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHTSxRQUFRO0lBQ2hDQyxhQUFhWixrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHTSxRQUFRO0lBQ2hDRSxtQkFBbUJiLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdNLFFBQVE7SUFDdENHLE1BQU1kLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdNLFFBQVE7SUFDekJJLE9BQU9mLGtDQUFDQSxDQUFDZ0IsTUFBTSxHQUFHQyxHQUFHLEdBQUdYLEdBQUcsQ0FBQyxHQUFHSyxRQUFRO0lBQ3ZDTyxXQUFXbEIsa0NBQUNBLENBQUNLLE1BQU0sR0FBR00sUUFBUTtJQUM5QlEsVUFBVW5CLGtDQUFDQSxDQUFDSyxNQUFNLEdBQUdNLFFBQVE7SUFDN0JTLFdBQVdwQixrQ0FBQ0EsQ0FBQ0ssTUFBTSxHQUFHTSxRQUFRO0lBQzlCVSxrQkFBa0JyQixrQ0FBQ0EsQ0FBQ2dCLE1BQU0sR0FBR0MsR0FBRyxHQUFHWCxHQUFHLENBQUMsTUFBTWdCLEdBQUcsQ0FBQyxJQUFJQyxPQUFPQyxXQUFXLElBQUliLFFBQVE7SUFDbkZjLFdBQVd6QixrQ0FBQ0EsQ0FBQ0ssTUFBTSxH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QUN6QyxJQUFJO1FBQ0Z2QixRQUFRQyxHQUFHLENBQUMsa0JBQWtCc0I7UUFFOUIsbURBQW1EO1FBQ25ELE1BQU0sRUFBRXJCLE1BQU0wQixPQUFPLEVBQUV6QixPQUFPMEIsWUFBWSxFQUFFLEdBQUcsTUFBTXJFLG1EQUFRQSxDQUMxRDRDLElBQUksQ0FBQyxXQUNMTyxNQUFNLENBQUMsTUFDUG1CLEVBQUUsQ0FBQyxXQUFXUCxJQUNkUSxFQUFFLENBQUMsVUFBVTtZQUFDO1lBQVU7U0FBVTtRQUVyQyxJQUFJRixjQUFjO1lBQ2hCLE1BQU0sSUFBSWpCLE1BQU0saUNBQXNELE9BQXJCaUIsYUFBYWhCLE9BQU87UUFDdkU7UUFFQSxJQUFJZSxXQUFXQSxRQUFRZCxNQUFNLEdBQUcsR0FBRztZQUNqQyxPQUFPO2dCQUNMRSxTQUFTO2dCQUNUYixPQUFPO1lBQ1Q7UUFDRjtRQUVBLGdCQUFnQjtRQUNoQixNQUFNLEVBQUVBLEtBQUssRUFBRSxHQUFHLE1BQU0zQyxtREFBUUEsQ0FDN0I0QyxJQUFJLENBQUMsU0FDTHNDLE1BQU0sR0FDTlosRUFBRSxDQUFDLE1BQU1QO1FBRVosSUFBSXBCLE9BQU87WUFDVCxNQUFNLElBQUlTLE1BQU1ULE1BQU1VLE9BQU87UUFDL0I7UUFFQWIsUUFBUUMsR0FBRyxDQUFDLDhCQUE4QnNCO1FBRTFDLE9BQU87WUFBRVAsU0FBUztRQUFLO0lBRXpCLEVBQUUsT0FBT2IsT0FBTztRQUNkSCxRQUFRRyxLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPO1lBQ0xhLFNBQVM7WUFDVGIsT0FBT0EsaUJBQWlCUyxRQUFRVCxNQUFNVSxPQUFPLEdBQUc7UUFDbEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvYWRtaW4vYWN0aW9ucy50cz8xNjYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCJcbmltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlXCJcbmltcG9ydCB0eXBlIHsgQ3JlYXRlQm9va0Zvcm0gfSBmcm9tIFwiQC9saWIvdHlwZXMvYWRtaW5cIlxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDQktCQ0JvQhtCU0JDQptCG0JnQndCGINCh0KXQldCc0Jhcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgQm9va0luc2VydFNjaGVtYSA9IHoub2JqZWN0KHtcbiAgY29kZTogei5zdHJpbmcoKS5taW4oMSwgXCLQmtC+0LQg0LrQvdC40LPQuCDQvtCx0L7QsifRj9C30LrQvtCy0LjQuVwiKSxcbiAgdGl0bGU6IHouc3RyaW5nKCkubWluKDEsIFwi0J3QsNC30LLQsCDQutC90LjQs9C4INC+0LHQvtCyJ9GP0LfQutC+0LLQsFwiKSxcbiAgYXV0aG9yOiB6LnN0cmluZygpLm1pbigxLCBcItCQ0LLRgtC+0YAg0L7QsdC+0LIn0Y/Qt9C60L7QstC40LlcIiksXG4gIGNhdGVnb3J5OiB6LnN0cmluZygpLm1pbigxLCBcItCa0LDRgtC10LPQvtGA0ZbRjyDQvtCx0L7QsifRj9C30LrQvtCy0LBcIiksXG4gIHN1YmNhdGVnb3J5OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGRlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHNob3J0X2Rlc2NyaXB0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIGlzYm46IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgcGFnZXM6IHoubnVtYmVyKCkuaW50KCkubWluKDEpLm9wdGlvbmFsKCksXG4gIGFnZV9yYW5nZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBsYW5ndWFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICBwdWJsaXNoZXI6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgcHVibGljYXRpb25feWVhcjogei5udW1iZXIoKS5pbnQoKS5taW4oMTAwMCkubWF4KG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSkub3B0aW9uYWwoKSxcbiAgY292ZXJfdXJsOiB6LnN0cmluZygpLnVybCgpLm9wdGlvbmFsKCksXG4gIHN0YXR1czogei5lbnVtKFsnYXZhaWxhYmxlJywgJ2lzc3VlZCcsICdyZXNlcnZlZCcsICdsb3N0J10pLFxuICBxdHlfdG90YWw6IHoubnVtYmVyKCkuaW50KCkubWluKDEpLFxuICBwcmljZV91YWg6IHoubnVtYmVyKCkubWluKDApLm9wdGlvbmFsKCksXG4gIGxvY2F0aW9uOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gIHJhdGluZzogei5udW1iZXIoKS5taW4oMCkubWF4KDUpLm9wdGlvbmFsKCksXG4gIHJhdGluZ19jb3VudDogei5udW1iZXIoKS5pbnQoKS5taW4oMCkub3B0aW9uYWwoKSxcbiAgYmFkZ2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gIHRhZ3M6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbn0pXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNFUlZFUiBBQ1RJT05TXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVCb29rKGZvcm06IENyZWF0ZUJvb2tGb3JtKSB7XG4gIHRyeSB7XG4gICAgLy8g0JLQsNC70ZbQtNGD0ZTQvNC+INC00LDQvdGWXG4gICAgY29uc3QgaW5wdXQgPSBCb29rSW5zZXJ0U2NoZW1hLnBhcnNlKGZvcm0pXG4gICAgXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIGJvb2s6JywgaW5wdXQpXG4gICAgXG4gICAgLy8g0KHQvtC30LTQsNC10Lwg0LrQvdC40LPRgyDQsiBTdXBhYmFzZVxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnYm9va3MnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIC4uLmlucHV0LFxuICAgICAgICBxdHlfYXZhaWxhYmxlOiBpbnB1dC5xdHlfdG90YWwsXG4gICAgICAgIGF2YWlsYWJsZTogaW5wdXQuc3RhdHVzID09PSAnYXZhaWxhYmxlJyxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pXG4gICAgICAuc2VsZWN0KClcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpXG4gICAgfVxuICAgIFxuICAgIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCfQndC1INCy0LTQsNC70L7RgdGPINGB0YLQstC+0YDQuNGC0Lgg0LrQvdC40LPRgyAtINC00LDQvdGWINC90LUg0L/QvtCy0LXRgNC90YPQu9C40YHRjyDQtyDQsdCw0LfQuCcpXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNyZWF0ZWRCb29rID0gZGF0YVswXVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCdCb29rIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5OicsIGRhdGEpXG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgZGF0YSB9XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ3JlYXRlIGJvb2sgZXJyb3I6JywgZXJyb3IpXG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgcmV0dXJuIHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6IGVycm9yLmVycm9ycy5tYXAoZSA9PiBlLm1lc3NhZ2UpLmpvaW4oJywgJylcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn0J3QtdCy0ZbQtNC+0LzQsCDQv9C+0LzQuNC70LrQsCdcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUJvb2soaWQ6IHN0cmluZywgZm9ybTogUGFydGlhbDxDcmVhdGVCb29rRm9ybT4pIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygn8J+TnSBTdGFydGluZyBib29rIHVwZGF0ZTonLCBpZCwgZm9ybSlcbiAgICBcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0YfRgtC+IElEINC00LXQudGB0YLQstC40YLQtdC70YzQvdC+INC/0LXRgNC10LTQsNC9XG4gICAgaWYgKCFpZCB8fCAhaWQudHJpbSgpKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiSUQg0LrQvdC40LPQuCDQvdC1INC/0LXRgNC10LTQsNC9INCw0LHQviDQv9GD0YHRgtC40LlcIiB9XG4gICAgfVxuICAgIFxuICAgIC8vINCS0LDQu9GW0LTRg9GU0LzQviDQvtCx0L7QsifRj9C30LrQvtCy0ZYg0L/QvtC70Y8g0Y/QutGJ0L4g0LLQvtC90Lgg0L/RgNC40YHRg9GC0L3RllxuICAgIGlmIChmb3JtLmNvZGUgJiYgIWZvcm0uY29kZS50cmltKCkpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogXCLQmtC+0LQg0LrQvdC40LPQuCDQvdC1INC80L7QttC1INCx0YPRgtC4INC/0YPRgdGC0LjQvFwiIH1cbiAgICB9XG4gICAgaWYgKGZvcm0udGl0bGUgJiYgIWZvcm0udGl0bGUudHJpbSgpKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwi0J3QsNC30LLQsCDQutC90LjQs9C4INC90LUg0LzQvtC20LUg0LHRg9GC0Lgg0L/Rg9GB0YLQvtGOXCIgfVxuICAgIH1cbiAgICBcbiAgICAvLyDQn9GW0LTQs9C+0YLQvtCy0LvRjtGU0LzQviDQtNCw0L3RliDQtNC70Y8g0L7QvdC+0LLQu9C10L3QvdGPXG4gICAgY29uc3QgdXBkYXRlRGF0YTogYW55ID0ge31cbiAgICBcbiAgICBpZiAoZm9ybS5jb2RlKSB1cGRhdGVEYXRhLmNvZGUgPSBmb3JtLmNvZGUudHJpbSgpXG4gICAgaWYgKGZvcm0udGl0bGUpIHVwZGF0ZURhdGEudGl0bGUgPSBmb3JtLnRpdGxlLnRyaW0oKVxuICAgIGlmIChmb3JtLmF1dGhvcikgdXBkYXRlRGF0YS5hdXRob3IgPSBmb3JtLmF1dGhvci50cmltKClcbiAgICBpZiAoZm9ybS5jYXRlZ29yeSkgdXBkYXRlRGF0YS5jYXRlZ29yeSA9IGZvcm0uY2F0ZWdvcnkudHJpbSgpXG4gICAgaWYgKGZvcm0uc3ViY2F0ZWdvcnkgIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zdWJjYXRlZ29yeSA9IGZvcm0uc3ViY2F0ZWdvcnk/LnRyaW0oKSB8fCBudWxsXG4gICAgaWYgKGZvcm0uZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5kZXNjcmlwdGlvbiA9IGZvcm0uZGVzY3JpcHRpb24/LnRyaW0oKSB8fCBudWxsXG4gICAgaWYgKGZvcm0uc2hvcnRfZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5zaG9ydF9kZXNjcmlwdGlvbiA9IGZvcm0uc2hvcnRfZGVzY3JpcHRpb24/LnRyaW0oKSB8fCBudWxsXG4gICAgaWYgKGZvcm0ubG9jYXRpb24gIT09IHVuZGVmaW5lZCkgdXBkYXRlRGF0YS5sb2NhdGlvbiA9IGZvcm0ubG9jYXRpb24/LnRyaW0oKSB8fCBudWxsXG4gICAgaWYgKGZvcm0uY292ZXJfdXJsICE9PSB1bmRlZmluZWQpIHVwZGF0ZURhdGEuY292ZXJfdXJsID0gZm9ybS5jb3Zlcl91cmwgfHwgbnVsbFxuICAgIGlmIChmb3JtLnN0YXR1cykgdXBkYXRlRGF0YS5zdGF0dXMgPSBmb3JtLnN0YXR1c1xuICAgIGlmIChmb3JtLnF0eV90b3RhbCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnF0eV90b3RhbCA9IE1hdGgubWF4KDEsIGZvcm0ucXR5X3RvdGFsKVxuICAgIGlmIChmb3JtLnByaWNlX3VhaCAhPT0gdW5kZWZpbmVkKSB1cGRhdGVEYXRhLnByaWNlX3VhaCA9IGZvcm0ucHJpY2VfdWFoIHx8IG51bGxcbiAgICBcbiAgICAvLyDQr9C60YnQviDQt9C80ZbQvdGO0ZTRgtGM0YHRjyDQutGW0LvRjNC60ZbRgdGC0YwsINC+0L3QvtCy0LvRjtGU0LzQviDQtNC+0YHRgtGD0L/QvdGW0YHRgtGMXG4gICAgaWYgKGZvcm0ucXR5X3RvdGFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vINCf0ZbQtNGA0LDRhdC+0LLRg9GU0LzQviDQsNC60YLQuNCy0L3RliDQsNGA0LXQvdC00LhcbiAgICAgIGNvbnN0IHsgZGF0YTogcmVudGFscywgZXJyb3I6IHJlbnRhbHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ3JlbnRhbHMnKVxuICAgICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAgIC5lcSgnYm9va19pZCcsIGlkKVxuICAgICAgICAuaW4oJ3N0YXR1cycsIFsnYWN0aXZlJywgJ292ZXJkdWUnXSlcbiAgICAgIFxuICAgICAgaWYgKHJlbnRhbHNFcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBjb3VudCBhY3RpdmUgcmVudGFsczonLCByZW50YWxzRXJyb3IpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhY3RpdmVSZW50YWxzID0gcmVudGFscz8ubGVuZ3RoIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YS5xdHlfYXZhaWxhYmxlID0gTWF0aC5tYXgoMCwgdXBkYXRlRGF0YS5xdHlfdG90YWwgLSBhY3RpdmVSZW50YWxzKVxuICAgICAgICB1cGRhdGVEYXRhLmF2YWlsYWJsZSA9IHVwZGF0ZURhdGEucXR5X2F2YWlsYWJsZSA+IDBcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g0J7QvdC+0LLQu9GO0ZTQvNC+INC00LDRgtGDINC30LzRltC90LhcbiAgICB1cGRhdGVEYXRhLnVwZGF0ZWRfYXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICBcbiAgICBjb25zb2xlLmxvZygn8J+SviBBdHRlbXB0aW5nIHRvIHVwZGF0ZSBib29rIHdpdGggSUQ6JywgaWQpXG4gICAgY29uc29sZS5sb2coJ/Cfk6YgVXBkYXRlIGRhdGE6JywgSlNPTi5zdHJpbmdpZnkodXBkYXRlRGF0YSwgbnVsbCwgMikpXG4gICAgXG4gICAgLy8g0KHQv9C+0YfQsNGC0LrRgyDQv9C10YDQtdCy0ZbRgNC40LzQviwg0YfQuCDRltGB0L3Rg9GUINC60L3QuNCz0LAg0Lcg0YLQsNC60LjQvCBJRFxuICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdCb29rLCBlcnJvcjogY2hlY2tFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdib29rcycpXG4gICAgICAuc2VsZWN0KCdpZCcpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2luZ2xlKClcbiAgICBcbiAgICBpZiAoY2hlY2tFcnJvciB8fCAhZXhpc3RpbmdCb29rKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBg0JrQvdC40LPRgyDQtyBJRCAke2lkfSDQvdC1INC30L3QsNC50LTQtdC90L4g0LIg0LHQsNC30ZYg0LTQsNC90LjRhWBcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JNZXNzYWdlLCBjaGVja0Vycm9yKVxuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBlcnJvck1lc3NhZ2UgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygn4pyFIEJvb2sgZXhpc3RzLCBwcm9jZWVkaW5nIHdpdGggdXBkYXRlJylcbiAgICBcbiAgICAvLyDQntC90L7QstC70Y7RlNC80L4g0LrQvdC40LPRgyDQsiBTdXBhYmFzZVxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnYm9va3MnKVxuICAgICAgLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgICAgLmVxKCdpZCcsIGlkKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKClcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGVycm9yOicsIGVycm9yKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yLm1lc3NhZ2UpXG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKCfinIUgQm9vayB1cGRhdGVkIHN1Y2Nlc3NmdWxseTonLCBkYXRhKVxuICAgIGNvbnNvbGUubG9nKCfwn5SNIFVwZGF0ZWQgYm9vayBkYXRhOicsIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpKVxuICAgIFxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfVxuICAgIFxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1VwZGF0ZSBib29rIGVycm9yOicsIGVycm9yKVxuICAgIHJldHVybiB7IFxuICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ9Cd0LXQstGW0LTQvtC80LAg0L/QvtC80LjQu9C60LAnXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVCb29rKGlkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnRGVsZXRpbmcgYm9vazonLCBpZClcbiAgICBcbiAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LXRgdGC0Ywg0LvQuCDQsNC60YLQuNCy0L3Ri9C1INCw0YDQtdC90LTRiyDQtNC70Y8g0Y3RgtC+0Lkg0LrQvdC40LPQuFxuICAgIGNvbnN0IHsgZGF0YTogcmVudGFscywgZXJyb3I6IHJlbnRhbHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdyZW50YWxzJylcbiAgICAgIC5zZWxlY3QoJ2lkJylcbiAgICAgIC5lcSgnYm9va19pZCcsIGlkKVxuICAgICAgLmluKCdzdGF0dXMnLCBbJ2FjdGl2ZScsICdvdmVyZHVlJ10pXG4gICAgXG4gICAgaWYgKHJlbnRhbHNFcnJvcikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGDQn9C+0LzQuNC70LrQsCDQv9C10YDQtdCy0ZbRgNC60Lgg0L7RgNC10L3QtNGD0LLQsNC90Yw6ICR7cmVudGFsc0Vycm9yLm1lc3NhZ2V9YClcbiAgICB9XG4gICAgXG4gICAgaWYgKHJlbnRhbHMgJiYgcmVudGFscy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4geyBcbiAgICAgICAgc3VjY2VzczogZmFsc2UsIFxuICAgICAgICBlcnJvcjogJ9Cd0LXQvNC+0LbQu9C40LLQviDQstC40LTQsNC70LjRgtC4INC60L3QuNCz0YMsINGP0LrQsCDQvNCw0ZQg0LDQutGC0LjQstC90ZYg0L7RgNC10L3QtNGD0LLQsNC90L3Rjy4g0KHQv9C+0YfQsNGC0LrRgyDQv9C+0LLQtdGA0L3RltGC0Ywg0LLRgdGWINC/0YDQuNC80ZbRgNC90LjQutC4LidcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8g0KPQtNCw0LvRj9C10Lwg0LrQvdC40LPRg1xuICAgIGNvbnN0IHsgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnYm9va3MnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IubWVzc2FnZSlcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0Jvb2sgZGVsZXRlZCBzdWNjZXNzZnVsbHk6JywgaWQpXG4gICAgXG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9XG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRGVsZXRlIGJvb2sgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn0J3QtdCy0ZbQtNC+0LzQsCDQv9C+0LzQuNC70LrQsCdcbiAgICB9XG4gIH1cbn0iXSwibmFtZXMiOlsieiIsInN1cGFiYXNlIiwiQm9va0luc2VydFNjaGVtYSIsIm9iamVjdCIsImNvZGUiLCJzdHJpbmciLCJtaW4iLCJ0aXRsZSIsImF1dGhvciIsImNhdGVnb3J5Iiwic3ViY2F0ZWdvcnkiLCJvcHRpb25hbCIsImRlc2NyaXB0aW9uIiwic2hvcnRfZGVzY3JpcHRpb24iLCJpc2JuIiwicGFnZXMiLCJudW1iZXIiLCJpbnQiLCJhZ2VfcmFuZ2UiLCJsYW5ndWFnZSIsInB1Ymxpc2hlciIsInB1YmxpY2F0aW9uX3llYXIiLCJtYXgiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJjb3Zlcl91cmwiLCJ1cmwiLCJzdGF0dXMiLCJlbnVtIiwicXR5X3RvdGFsIiwicHJpY2VfdWFoIiwibG9jYXRpb24iLCJyYXRpbmciLCJyYXRpbmdfY291bnQiLCJiYWRnZXMiLCJhcnJheSIsInRhZ3MiLCJjcmVhdGVCb29rIiwiZm9ybSIsImlucHV0IiwicGFyc2UiLCJjb25zb2xlIiwibG9nIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsImluc2VydCIsInF0eV9hdmFpbGFibGUiLCJhdmFpbGFibGUiLCJjcmVhdGVkX2F0IiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0Iiwic2VsZWN0IiwiRXJyb3IiLCJtZXNzYWdlIiwibGVuZ3RoIiwiY3JlYXRlZEJvb2siLCJzdWNjZXNzIiwiWm9kRXJyb3IiLCJlcnJvcnMiLCJtYXAiLCJlIiwiam9pbiIsInVwZGF0ZUJvb2siLCJpZCIsInRyaW0iLCJ1cGRhdGVEYXRhIiwidW5kZWZpbmVkIiwiTWF0aCIsInJlbnRhbHMiLCJyZW50YWxzRXJyb3IiLCJlcSIsImluIiwid2FybiIsImFjdGl2ZVJlbnRhbHMiLCJKU09OIiwic3RyaW5naWZ5IiwiZXhpc3RpbmdCb29rIiwiY2hlY2tFcnJvciIsInNpbmdsZSIsImVycm9yTWVzc2FnZSIsInVwZGF0ZSIsImRlbGV0ZUJvb2siLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/admin/actions.ts\n"));

/***/ })

});