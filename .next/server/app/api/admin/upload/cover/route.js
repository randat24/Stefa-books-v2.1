"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/upload/cover/route";
exports.ids = ["app/api/admin/upload/cover/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "(rsc)/../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&page=%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute.ts&appDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&page=%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute.ts&appDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_fantomas_Documents_GitHub_Stefa_books_v2_1_src_app_api_admin_upload_cover_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/admin/upload/cover/route.ts */ \"(rsc)/./src/app/api/admin/upload/cover/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/upload/cover/route\",\n        pathname: \"/api/admin/upload/cover\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/upload/cover/route\"\n    },\n    resolvedPagePath: \"/Users/fantomas/Documents/GitHub/Stefa-books-v2.1/src/app/api/admin/upload/cover/route.ts\",\n    nextConfigOutput,\n    userland: _Users_fantomas_Documents_GitHub_Stefa_books_v2_1_src_app_api_admin_upload_cover_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/upload/cover/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMi40X0BiYWJlbCtjb3JlQDcuMjguM19AcGxheXdyaWdodCt0ZXN0QDEuNTUuMF9yZWFjdC1kb21AMTguMy4xX3JlYWN0QDE4LjMuMV9fcmVhY3RAMTguMy4xL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtYXBwLWxvYWRlci5qcz9uYW1lPWFwcCUyRmFwaSUyRmFkbWluJTJGdXBsb2FkJTJGY292ZXIlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGdXBsb2FkJTJGY292ZXIlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRnVwbG9hZCUyRmNvdmVyJTJGcm91dGUudHMmYXBwRGlyPSUyRlVzZXJzJTJGZmFudG9tYXMlMkZEb2N1bWVudHMlMkZHaXRIdWIlMkZTdGVmYS1ib29rcy12Mi4xJTJGc3JjJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmZhbnRvbWFzJTJGRG9jdW1lbnRzJTJGR2l0SHViJTJGU3RlZmEtYm9va3MtdjIuMSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDeUM7QUFDdEg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdGVmYS1ib29rcy1maW5hbC8/ZTI4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvZmFudG9tYXMvRG9jdW1lbnRzL0dpdEh1Yi9TdGVmYS1ib29rcy12Mi4xL3NyYy9hcHAvYXBpL2FkbWluL3VwbG9hZC9jb3Zlci9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWRtaW4vdXBsb2FkL2NvdmVyL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWRtaW4vdXBsb2FkL2NvdmVyXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hZG1pbi91cGxvYWQvY292ZXIvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvZmFudG9tYXMvRG9jdW1lbnRzL0dpdEh1Yi9TdGVmYS1ib29rcy12Mi4xL3NyYy9hcHAvYXBpL2FkbWluL3VwbG9hZC9jb3Zlci9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvYWRtaW4vdXBsb2FkL2NvdmVyL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&page=%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute.ts&appDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/admin/upload/cover/route.ts":
/*!*************************************************!*\
  !*** ./src/app/api/admin/upload/cover/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cloudinary */ \"(rsc)/../../../node_modules/.pnpm/cloudinary@2.7.0/node_modules/cloudinary/cloudinary.js\");\n/* harmony import */ var cloudinary__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cloudinary__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// ============================================================================\n// КОНФІГУРАЦІЯ CLOUDINARY\n// ============================================================================\ncloudinary__WEBPACK_IMPORTED_MODULE_1__.v2.config({\n    cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n    api_key: process.env.CLOUDINARY_API_KEY,\n    api_secret: process.env.CLOUDINARY_API_SECRET,\n    secure: true\n});\n// ============================================================================\n// ОБМЕЖЕННЯ ФАЙЛІВ\n// ============================================================================\nconst ALLOWED_MIME_TYPES = new Set([\n    \"image/jpeg\",\n    \"image/jpg\",\n    \"image/png\",\n    \"image/webp\",\n    \"image/gif\"\n]);\nconst MAX_FILE_SIZE = 5 * 1024 * 1024 // 5 МБ\n;\nconst MIN_DIMENSIONS = {\n    width: 200,\n    height: 300\n} // мінімальні розміри\n;\n// ============================================================================\n// ВАЛІДАЦІЯ ФАЙЛУ\n// ============================================================================\nasync function validateImageFile(file) {\n    // Перевіряємо MIME тип\n    if (!ALLOWED_MIME_TYPES.has(file.type)) {\n        return {\n            valid: false,\n            error: `Непідтримуваний тип файлу. Дозволені: ${Array.from(ALLOWED_MIME_TYPES).join(\", \")}`\n        };\n    }\n    // Перевіряємо розмір\n    if (file.size > MAX_FILE_SIZE) {\n        return {\n            valid: false,\n            error: `Файл занадто великий. Максимум: ${MAX_FILE_SIZE / (1024 * 1024)} МБ`\n        };\n    }\n    return {\n        valid: true\n    };\n}\n// ============================================================================\n// ЗАВАНТАЖЕННЯ НА CLOUDINARY\n// ============================================================================\nasync function POST(req) {\n    try {\n        // Отримуємо файл з FormData\n        const formData = await req.formData();\n        const file = formData.get(\"file\");\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Файл не знайдено\"\n            }, {\n                status: 400\n            });\n        }\n        // Валідуємо файл\n        const validation = await validateImageFile(file);\n        if (!validation.valid) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: validation.error\n            }, {\n                status: 400\n            });\n        }\n        // Конвертуємо File в Buffer\n        const arrayBuffer = await file.arrayBuffer();\n        const buffer = Buffer.from(arrayBuffer);\n        // Налаштування завантаження\n        const folder = \"stefa-books/covers\";\n        const publicId = `stefa-books-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n        // Завантажуємо через upload_stream\n        const result = await new Promise((resolve, reject)=>{\n            const uploadStream = cloudinary__WEBPACK_IMPORTED_MODULE_1__.v2.uploader.upload_stream({\n                folder,\n                public_id: publicId,\n                overwrite: false,\n                unique_filename: true,\n                use_filename: false,\n                resource_type: \"image\",\n                // Базові трансформації для оптимізації\n                transformation: [\n                    {\n                        fetch_format: \"auto\",\n                        quality: \"auto:best\",\n                        width: 400,\n                        height: 600,\n                        crop: \"limit\" // не обрізаємо, тільки масштабуємо\n                    }\n                ],\n                // Метадані для пошуку\n                context: {\n                    alt: `Обкладинка книги Stefa.books`,\n                    caption: `Завантажено: ${new Date().toISOString()}`\n                }\n            }, (error, result)=>{\n                if (error) {\n                    console.error(\"Cloudinary upload error:\", error);\n                    reject(new Error(\"Помилка завантаження на Cloudinary\"));\n                    return;\n                }\n                if (!result?.secure_url) {\n                    reject(new Error(\"Не вдалося отримати URL завантаженого файлу\"));\n                    return;\n                }\n                resolve(result);\n            });\n            uploadStream.end(buffer);\n        });\n        // Повертаємо успішний результат\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            secure_url: result.secure_url,\n            public_id: result.public_id,\n            width: result.width,\n            height: result.height,\n            bytes: result.bytes,\n            format: result.format,\n            message: \"Обкладинка успішно завантажена\"\n        });\n    } catch (error) {\n        console.error(\"Upload cover error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Невідома помилка завантаження\"\n        }, {\n            status: 500\n        });\n    }\n}\n// ============================================================================\n// ВИДАЛЕННЯ ФАЙЛУ\n// ============================================================================\nasync function DELETE(req) {\n    try {\n        const { searchParams } = new URL(req.url);\n        const publicId = searchParams.get(\"public_id\");\n        if (!publicId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Public ID не вказано\"\n            }, {\n                status: 400\n            });\n        }\n        // Видаляємо файл з Cloudinary\n        const result = await cloudinary__WEBPACK_IMPORTED_MODULE_1__.v2.uploader.destroy(publicId);\n        if (result.result === \"ok\") {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                message: \"Файл успішно видалено\"\n            });\n        } else {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Не вдалося видалити файл\"\n            }, {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"Delete cover error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Невідома помилка видалення\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9hZG1pbi91cGxvYWQvY292ZXIvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMEM7QUFDRztBQUU3QywrRUFBK0U7QUFDL0UsMEJBQTBCO0FBQzFCLCtFQUErRTtBQUUvRUUsMENBQVVBLENBQUNDLE1BQU0sQ0FBQztJQUNoQkMsWUFBWUMsUUFBUUMsR0FBRyxDQUFDQyxxQkFBcUI7SUFDN0NDLFNBQVNILFFBQVFDLEdBQUcsQ0FBQ0csa0JBQWtCO0lBQ3ZDQyxZQUFZTCxRQUFRQyxHQUFHLENBQUNLLHFCQUFxQjtJQUM3Q0MsUUFBUTtBQUNWO0FBRUEsK0VBQStFO0FBQy9FLG1CQUFtQjtBQUNuQiwrRUFBK0U7QUFFL0UsTUFBTUMscUJBQXFCLElBQUlDLElBQUk7SUFDakM7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNEO0FBRUQsTUFBTUMsZ0JBQWdCLElBQUksT0FBTyxLQUFLLE9BQU87O0FBQzdDLE1BQU1DLGlCQUFpQjtJQUFFQyxPQUFPO0lBQUtDLFFBQVE7QUFBSSxFQUFFLHFCQUFxQjs7QUFFeEUsK0VBQStFO0FBQy9FLGtCQUFrQjtBQUNsQiwrRUFBK0U7QUFFL0UsZUFBZUMsa0JBQWtCQyxJQUFVO0lBQ3pDLHVCQUF1QjtJQUN2QixJQUFJLENBQUNQLG1CQUFtQlEsR0FBRyxDQUFDRCxLQUFLRSxJQUFJLEdBQUc7UUFDdEMsT0FBTztZQUNMQyxPQUFPO1lBQ1BDLE9BQU8sQ0FBQyxzQ0FBc0MsRUFBRUMsTUFBTUMsSUFBSSxDQUFDYixvQkFBb0JjLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDN0Y7SUFDRjtJQUVBLHFCQUFxQjtJQUNyQixJQUFJUCxLQUFLUSxJQUFJLEdBQUdiLGVBQWU7UUFDN0IsT0FBTztZQUNMUSxPQUFPO1lBQ1BDLE9BQU8sQ0FBQyxnQ0FBZ0MsRUFBRVQsZ0JBQWlCLFFBQU8sSUFBRyxFQUFHLEdBQUcsQ0FBQztRQUM5RTtJQUNGO0lBRUEsT0FBTztRQUFFUSxPQUFPO0lBQUs7QUFD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SUFBSTtRQUNGLE1BQU0sRUFBRThDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUkvQyxJQUFJZ0QsR0FBRztRQUN4QyxNQUFNdEMsV0FBV29DLGFBQWE1QyxHQUFHLENBQUM7UUFFbEMsSUFBSSxDQUFDUSxVQUFVO1lBQ2IsT0FBT3hDLHFEQUFZQSxDQUFDaUMsSUFBSSxDQUN0QjtnQkFBRVQsT0FBTztZQUF1QixHQUNoQztnQkFBRVUsUUFBUTtZQUFJO1FBRWxCO1FBRUEsOEJBQThCO1FBQzlCLE1BQU1hLFNBQVMsTUFBTTdDLDBDQUFVQSxDQUFDa0QsUUFBUSxDQUFDMkIsT0FBTyxDQUFDdkM7UUFFakQsSUFBSU8sT0FBT0EsTUFBTSxLQUFLLE1BQU07WUFDMUIsT0FBTy9DLHFEQUFZQSxDQUFDaUMsSUFBSSxDQUFDO2dCQUN2QnNDLFNBQVM7Z0JBQ1RHLFNBQVM7WUFDWDtRQUNGLE9BQU87WUFDTCxPQUFPMUUscURBQVlBLENBQUNpQyxJQUFJLENBQ3RCO2dCQUFFVCxPQUFPO1lBQTJCLEdBQ3BDO2dCQUFFVSxRQUFRO1lBQUk7UUFFbEI7SUFFRixFQUFFLE9BQU9WLE9BQU87UUFDZDJDLFFBQVEzQyxLQUFLLENBQUMsdUJBQXVCQTtRQUVyQyxPQUFPeEIscURBQVlBLENBQUNpQyxJQUFJLENBQ3RCO1lBQ0VULE9BQU9BLGlCQUFpQjRDLFFBQVE1QyxNQUFNa0QsT0FBTyxHQUFHO1FBQ2xELEdBQ0E7WUFBRXhDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RlZmEtYm9va3MtZmluYWwvLi9zcmMvYXBwL2FwaS9hZG1pbi91cGxvYWQvY292ZXIvcm91dGUudHM/NmM1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHYyIGFzIGNsb3VkaW5hcnkgfSBmcm9tICdjbG91ZGluYXJ5J1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDQmtCe0J3QpNCG0JPQo9Cg0JDQptCG0K8gQ0xPVURJTkFSWVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5jbG91ZGluYXJ5LmNvbmZpZyh7XG4gIGNsb3VkX25hbWU6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQ0xPVURfTkFNRSEsXG4gIGFwaV9rZXk6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQVBJX0tFWSEsXG4gIGFwaV9zZWNyZXQ6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQVBJX1NFQ1JFVCEsXG4gIHNlY3VyZTogdHJ1ZSxcbn0pXG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vINCe0JHQnNCV0JbQldCd0J3QryDQpNCQ0JnQm9CG0JJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuY29uc3QgQUxMT1dFRF9NSU1FX1RZUEVTID0gbmV3IFNldChbXG4gICdpbWFnZS9qcGVnJywgXG4gICdpbWFnZS9qcGcnLCBcbiAgJ2ltYWdlL3BuZycsIFxuICAnaW1hZ2Uvd2VicCcsIFxuICAnaW1hZ2UvZ2lmJ1xuXSlcblxuY29uc3QgTUFYX0ZJTEVfU0laRSA9IDUgKiAxMDI0ICogMTAyNCAvLyA1INCc0JFcbmNvbnN0IE1JTl9ESU1FTlNJT05TID0geyB3aWR0aDogMjAwLCBoZWlnaHQ6IDMwMCB9IC8vINC80ZbQvdGW0LzQsNC70YzQvdGWINGA0L7Qt9C80ZbRgNC4XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vINCS0JDQm9CG0JTQkNCm0IbQryDQpNCQ0JnQm9CjXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlSW1hZ2VGaWxlKGZpbGU6IEZpbGUpOiBQcm9taXNlPHsgdmFsaWQ6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgLy8g0J/QtdGA0LXQstGW0YDRj9GU0LzQviBNSU1FINGC0LjQv1xuICBpZiAoIUFMTE9XRURfTUlNRV9UWVBFUy5oYXMoZmlsZS50eXBlKSkge1xuICAgIHJldHVybiB7IFxuICAgICAgdmFsaWQ6IGZhbHNlLCBcbiAgICAgIGVycm9yOiBg0J3QtdC/0ZbQtNGC0YDQuNC80YPQstCw0L3QuNC5INGC0LjQvyDRhNCw0LnQu9GDLiDQlNC+0LfQstC+0LvQtdC90ZY6ICR7QXJyYXkuZnJvbShBTExPV0VEX01JTUVfVFlQRVMpLmpvaW4oJywgJyl9YCBcbiAgICB9XG4gIH1cblxuICAvLyDQn9C10YDQtdCy0ZbRgNGP0ZTQvNC+INGA0L7Qt9C80ZbRgFxuICBpZiAoZmlsZS5zaXplID4gTUFYX0ZJTEVfU0laRSkge1xuICAgIHJldHVybiB7IFxuICAgICAgdmFsaWQ6IGZhbHNlLCBcbiAgICAgIGVycm9yOiBg0KTQsNC50Lsg0LfQsNC90LDQtNGC0L4g0LLQtdC70LjQutC40LkuINCc0LDQutGB0LjQvNGD0Lw6ICR7TUFYX0ZJTEVfU0laRSAvICgxMDI0ICogMTAyNCl9INCc0JFgIFxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g0JfQkNCS0JDQndCi0JDQltCV0J3QndCvINCd0JAgQ0xPVURJTkFSWVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyDQntGC0YDQuNC80YPRlNC80L4g0YTQsNC50Lsg0LcgRm9ybURhdGFcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcS5mb3JtRGF0YSgpXG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGUgfCBudWxsXG5cbiAgICBpZiAoIWZpbGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ9Ck0LDQudC7INC90LUg0LfQvdCw0LnQtNC10L3QvicgfSwgXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vINCS0LDQu9GW0LTRg9GU0LzQviDRhNCw0LnQu1xuICAgIGNvbnN0IHZhbGlkYXRpb24gPSBhd2FpdCB2YWxpZGF0ZUltYWdlRmlsZShmaWxlKVxuICAgIGlmICghdmFsaWRhdGlvbi52YWxpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiB2YWxpZGF0aW9uLmVycm9yIH0sIFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyDQmtC+0L3QstC10YDRgtGD0ZTQvNC+IEZpbGUg0LIgQnVmZmVyXG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBmaWxlLmFycmF5QnVmZmVyKClcbiAgICBjb25zdCBidWZmZXIgPSBCdWZmZXIuZnJvbShhcnJheUJ1ZmZlcilcblxuICAgIC8vINCd0LDQu9Cw0YjRgtGD0LLQsNC90L3RjyDQt9Cw0LLQsNC90YLQsNC20LXQvdC90Y9cbiAgICBjb25zdCBmb2xkZXIgPSAnc3RlZmEtYm9va3MvY292ZXJzJ1xuICAgIGNvbnN0IHB1YmxpY0lkID0gYHN0ZWZhLWJvb2tzLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YFxuXG4gICAgLy8g0JfQsNCy0LDQvdGC0LDQttGD0ZTQvNC+INGH0LXRgNC10LcgdXBsb2FkX3N0cmVhbVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdXBsb2FkU3RyZWFtID0gY2xvdWRpbmFyeS51cGxvYWRlci51cGxvYWRfc3RyZWFtKFxuICAgICAgICB7XG4gICAgICAgICAgZm9sZGVyLFxuICAgICAgICAgIHB1YmxpY19pZDogcHVibGljSWQsXG4gICAgICAgICAgb3ZlcndyaXRlOiBmYWxzZSxcbiAgICAgICAgICB1bmlxdWVfZmlsZW5hbWU6IHRydWUsXG4gICAgICAgICAgdXNlX2ZpbGVuYW1lOiBmYWxzZSxcbiAgICAgICAgICByZXNvdXJjZV90eXBlOiAnaW1hZ2UnLFxuICAgICAgICAgIC8vINCR0LDQt9C+0LLRliDRgtGA0LDQvdGB0YTQvtGA0LzQsNGG0ZbRlyDQtNC70Y8g0L7Qv9GC0LjQvNGW0LfQsNGG0ZbRl1xuICAgICAgICAgIHRyYW5zZm9ybWF0aW9uOiBbXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICBmZXRjaF9mb3JtYXQ6ICdhdXRvJywgXG4gICAgICAgICAgICAgIHF1YWxpdHk6ICdhdXRvOmJlc3QnLFxuICAgICAgICAgICAgICB3aWR0aDogNDAwLCAvLyDQvNCw0LrRgdC40LzQsNC70YzQvdCwINGI0LjRgNC40L3QsFxuICAgICAgICAgICAgICBoZWlnaHQ6IDYwMCwgLy8g0LzQsNC60YHQuNC80LDQu9GM0L3QsCDQstC40YHQvtGC0LBcbiAgICAgICAgICAgICAgY3JvcDogJ2xpbWl0JyAvLyDQvdC1INC+0LHRgNGW0LfQsNGU0LzQviwg0YLRltC70YzQutC4INC80LDRgdGI0YLQsNCx0YPRlNC80L5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIC8vINCc0LXRgtCw0LTQsNC90ZYg0LTQu9GPINC/0L7RiNGD0LrRg1xuICAgICAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgICAgIGFsdDogYNCe0LHQutC70LDQtNC40L3QutCwINC60L3QuNCz0LggU3RlZmEuYm9va3NgLFxuICAgICAgICAgICAgY2FwdGlvbjogYNCX0LDQstCw0L3RgtCw0LbQtdC90L46ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfWBcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIChlcnJvciwgcmVzdWx0KSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDbG91ZGluYXJ5IHVwbG9hZCBlcnJvcjonLCBlcnJvcilcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ9Cf0L7QvNC40LvQutCwINC30LDQstCw0L3RgtCw0LbQtdC90L3RjyDQvdCwIENsb3VkaW5hcnknKSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoIXJlc3VsdD8uc2VjdXJlX3VybCkge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcign0J3QtSDQstC00LDQu9C+0YHRjyDQvtGC0YDQuNC80LDRgtC4IFVSTCDQt9Cw0LLQsNC90YLQsNC20LXQvdC+0LPQviDRhNCw0LnQu9GDJykpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXNvbHZlKHJlc3VsdClcbiAgICAgICAgfVxuICAgICAgKVxuXG4gICAgICB1cGxvYWRTdHJlYW0uZW5kKGJ1ZmZlcilcbiAgICB9KVxuXG4gICAgLy8g0J/QvtCy0LXRgNGC0LDRlNC80L4g0YPRgdC/0ZbRiNC90LjQuSDRgNC10LfRg9C70YzRgtCw0YJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHNlY3VyZV91cmw6IHJlc3VsdC5zZWN1cmVfdXJsLFxuICAgICAgcHVibGljX2lkOiByZXN1bHQucHVibGljX2lkLFxuICAgICAgd2lkdGg6IHJlc3VsdC53aWR0aCxcbiAgICAgIGhlaWdodDogcmVzdWx0LmhlaWdodCxcbiAgICAgIGJ5dGVzOiByZXN1bHQuYnl0ZXMsXG4gICAgICBmb3JtYXQ6IHJlc3VsdC5mb3JtYXQsXG4gICAgICBtZXNzYWdlOiAn0J7QsdC60LvQsNC00LjQvdC60LAg0YPRgdC/0ZbRiNC90L4g0LfQsNCy0LDQvdGC0LDQttC10L3QsCdcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignVXBsb2FkIGNvdmVyIGVycm9yOicsIGVycm9yKVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICfQndC10LLRltC00L7QvNCwINC/0L7QvNC40LvQutCwINC30LDQstCw0L3RgtCw0LbQtdC90L3RjycgXG4gICAgICB9LCBcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgIClcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDQktCY0JTQkNCb0JXQndCd0K8g0KTQkNCZ0JvQo1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpXG4gICAgY29uc3QgcHVibGljSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdwdWJsaWNfaWQnKVxuXG4gICAgaWYgKCFwdWJsaWNJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnUHVibGljIElEINC90LUg0LLQutCw0LfQsNC90L4nIH0sIFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgIClcbiAgICB9XG5cbiAgICAvLyDQktC40LTQsNC70Y/RlNC80L4g0YTQsNC50Lsg0LcgQ2xvdWRpbmFyeVxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNsb3VkaW5hcnkudXBsb2FkZXIuZGVzdHJveShwdWJsaWNJZClcblxuICAgIGlmIChyZXN1bHQucmVzdWx0ID09PSAnb2snKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAn0KTQsNC50Lsg0YPRgdC/0ZbRiNC90L4g0LLQuNC00LDQu9C10L3QvidcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ9Cd0LUg0LLQtNCw0LvQvtGB0Y8g0LLQuNC00LDQu9C40YLQuCDRhNCw0LnQuycgfSwgXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RlbGV0ZSBjb3ZlciBlcnJvcjonLCBlcnJvcilcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAn0J3QtdCy0ZbQtNC+0LzQsCDQv9C+0LzQuNC70LrQsCDQstC40LTQsNC70LXQvdC90Y8nIFxuICAgICAgfSwgXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwidjIiLCJjbG91ZGluYXJ5IiwiY29uZmlnIiwiY2xvdWRfbmFtZSIsInByb2Nlc3MiLCJlbnYiLCJDTE9VRElOQVJZX0NMT1VEX05BTUUiLCJhcGlfa2V5IiwiQ0xPVURJTkFSWV9BUElfS0VZIiwiYXBpX3NlY3JldCIsIkNMT1VESU5BUllfQVBJX1NFQ1JFVCIsInNlY3VyZSIsIkFMTE9XRURfTUlNRV9UWVBFUyIsIlNldCIsIk1BWF9GSUxFX1NJWkUiLCJNSU5fRElNRU5TSU9OUyIsIndpZHRoIiwiaGVpZ2h0IiwidmFsaWRhdGVJbWFnZUZpbGUiLCJmaWxlIiwiaGFzIiwidHlwZSIsInZhbGlkIiwiZXJyb3IiLCJBcnJheSIsImZyb20iLCJqb2luIiwic2l6ZSIsIlBPU1QiLCJyZXEiLCJmb3JtRGF0YSIsImdldCIsImpzb24iLCJzdGF0dXMiLCJ2YWxpZGF0aW9uIiwiYXJyYXlCdWZmZXIiLCJidWZmZXIiLCJCdWZmZXIiLCJmb2xkZXIiLCJwdWJsaWNJZCIsIkRhdGUiLCJub3ciLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiLCJyZXN1bHQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInVwbG9hZFN0cmVhbSIsInVwbG9hZGVyIiwidXBsb2FkX3N0cmVhbSIsInB1YmxpY19pZCIsIm92ZXJ3cml0ZSIsInVuaXF1ZV9maWxlbmFtZSIsInVzZV9maWxlbmFtZSIsInJlc291cmNlX3R5cGUiLCJ0cmFuc2Zvcm1hdGlvbiIsImZldGNoX2Zvcm1hdCIsInF1YWxpdHkiLCJjcm9wIiwiY29udGV4dCIsImFsdCIsImNhcHRpb24iLCJ0b0lTT1N0cmluZyIsImNvbnNvbGUiLCJFcnJvciIsInNlY3VyZV91cmwiLCJlbmQiLCJzdWNjZXNzIiwiYnl0ZXMiLCJmb3JtYXQiLCJtZXNzYWdlIiwiREVMRVRFIiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiZGVzdHJveSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/admin/upload/cover/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/lodash@4.17.21","vendor-chunks/cloudinary@2.7.0","vendor-chunks/q@1.5.1"], () => (__webpack_exec__("(rsc)/../../../node_modules/.pnpm/next@14.2.4_@babel+core@7.28.3_@playwright+test@1.55.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&page=%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fupload%2Fcover%2Froute.ts&appDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Ffantomas%2FDocuments%2FGitHub%2FStefa-books-v2.1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();